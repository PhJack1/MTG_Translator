FONCTIONNE POUR MTGTOP8 EN VISUAL PB AVEC LES NOMS RECENTS PAS DANS SCRYFALL

// 1. Sélectionner tous les éléments <a href="#7">
const elements = document.querySelectorAll('a[href="#7"]');
console.log(`Nombre d'éléments trouvés : ${elements.length}`);

// 2. Fonction pour traduire un nom de carte via l'API Scryfall
async function traduireNom(nomAnglais) {
  try {
    console.log(`Recherche de la traduction pour : "${nomAnglais}"`);

    // Étape 1 : Récupérer l'oracle_id de la carte en anglais
    const responseEn = await fetch(`https://api.scryfall.com/cards/named?exact=${encodeURIComponent(nomAnglais)}`);
    const dataEn = await responseEn.json();
    const oracleId = dataEn.oracle_id;
    console.log(`Oracle ID : ${oracleId}`);

    // Étape 2 : Chercher toutes les impressions françaises de cette carte
    const responseFr = await fetch(`https://api.scryfall.com/cards/search?q=oracle_id:${oracleId}+lang:fr`);
    const dataFr = await responseFr.json();

    if (dataFr.data && dataFr.data.length > 0) {
      // Utiliser printed_name si disponible, sinon name
      const nomFrancais = dataFr.data[0].printed_name || dataFr.data[0].name;
      console.log(`Traduction trouvée pour "${nomAnglais}" : "${nomFrancais}"`);
      return nomFrancais;
    } else {
      console.log(`Aucune traduction française trouvée pour "${nomAnglais}"`);
      return nomAnglais;
    }
  } catch (error) {
    console.error(`Erreur pour "${nomAnglais}":`, error);
    return nomAnglais;
  }
}

// 3. Remplacer chaque nom par sa traduction
async function traduireEtRemplacer() {
  for (const element of elements) {
    const nomAnglais = element.textContent.trim();
    console.log(`Traitement de l'élément : "${nomAnglais}"`);

    const nomFrancais = await traduireNom(nomAnglais);
    console.log(`Remplacement de "${nomAnglais}" par "${nomFrancais}"`);

    element.textContent = nomFrancais;
  }
  console.log("Traduction terminée !");
}

// 4. Lancer la traduction
traduireEtRemplacer();
